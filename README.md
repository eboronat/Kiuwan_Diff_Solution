# Kiuwan_Diff_Solution
In a delivery analysis it is very interesting to analyze only the last changes (last files) that a developer has done. For that, a script is provided to take these files that have been modified and a java program to generate a .properties file that will be interpreted by Kiuwan.

## Get modified files
You can use the attached file (diff.cmd) which contains a git command (git diff) that will write the modified files into diff.txt

## Running the java program
The program receives as argument a file path (in our case: diff.txt). This file has the modified filenames (one per line).
The program will generate a .properties file called Example.properties with the property include.patterns that is the one read by Kiuwan to indicate that only these files are the ones to be analysed.

## Run Kiuwan Local Analyzer (KLA) via Command Line Interface (CLI)
You can launch an analysis with the following command:
```
agent.cmd -s {WORKSPACE} -n MyApplication -a Example.propeties -as partialDelivery -l ${BUILD_NUMBER} -cr "Change Request label"
```

You can find the documentation into: https://www.kiuwan.com/docs/display/K5/Kiuwan+Local+Analyzer+CLI+-+Command+Line+Interface

## Example
```
C:\Users\eboronat\Desktop\projects\MyApplication> diff.cmd
```
diff.txt file is generated with the following content (that are the files I have modified): 
```
app/pom.xml
app/src/main/java/com/kiuwan/MyFile.java
```
Run Java program passing as argument diff.txt file path:
```
java -jar Diff.jar C:\Users\eboronat\Desktop\projects\MyApplication\diff.txt
```
Pass Example.properties (generated by java program) to Kiuwan CLI:
```
agent.cmd -s C:\Users\eboronat\Desktop\projects\MyApplication\ -n MyApplication -a C:\Users\eboronat\Desktop\projects\MyApplication\Example.properties -as partialDelivery -l "label" -cr "Change Request label"
```
